(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const ne=Symbol("__LUME_REACTIVE__");function re(e){if(!e||typeof e!="object"||Array.isArray(e))throw new Error("state() requires a plain object");const t={},n=new Map,s=new Set;let r=!1;function i(){r||(r=!0,queueMicrotask(()=>{r=!1;for(const[o,l]of n)t[o]&&Array.from(t[o]).forEach(d=>d(l));n.clear();const a=Array.from(s);s.clear(),a.forEach(o=>o())}))}const c=new Proxy(e,{get(a,o){if(o===ne)return!0;if(typeof o=="string"&&o.startsWith("$"))return a[o];if(typeof globalThis.__LUME_CURRENT_EFFECT__<"u"){const l=globalThis.__LUME_CURRENT_EFFECT__;if(l&&!l.tracking[o]){l.tracking[o]=!0;const f=(()=>{t[o]||(t[o]=[]);const d=()=>{s.add(l.execute)};return t[o].push(d),()=>{t[o]&&(t[o]=t[o].filter(g=>g!==d))}})();l.cleanups.push(f)}}return a[o]},set(a,o,l){return a[o]===l||(a[o]=l,n.set(o,l),i()),!0}});return c.$subscribe=(a,o)=>{if(typeof o!="function")throw new Error("Subscriber must be a function");return t[a]||(t[a]=[]),t[a].push(o),o(c[a]),()=>{t[a]&&(t[a]=t[a].filter(l=>l!==o))}},c}function oe(e,t){if(!t||t.length===0)return e;let n=e;for(let s=0;s<t.length;s++){const r=t[s];if(n==null)throw new Error(`Cannot access property "${r}" of ${n} at path: ${t.slice(0,s+1).join(".")}`);if(!(r in n))throw new Error(`Property "${r}" does not exist at path: ${t.slice(0,s+1).join(".")}`);n=n[r]}return n}function se(e,t,n={}){if(!(e instanceof HTMLElement))throw new Error("bindDom() requires a valid HTMLElement as root");if(!t||typeof t!="object")throw new Error("bindDom() requires a reactive state object");const{immediate:s=!1}=n,r=()=>{const i=e.querySelectorAll("[data-bind]"),c=[];return i.forEach(a=>{const o=a.getAttribute("data-bind");if(!o){console.warn("[Lume.js] Empty data-bind attribute found",a);return}const l=o.split("."),f=l.pop();let d;try{d=oe(t,l)}catch(m){console.warn(`[Lume.js] Invalid binding path "${o}":`,m.message);return}if(!d||typeof d.$subscribe!="function"){console.warn(`[Lume.js] Target for "${o}" is not a reactive state object`);return}const g=d.$subscribe(f,m=>{ae(a,m)});if(c.push(g),le(a)){const m=te=>{d[f]=ie(te.target)};a.addEventListener("input",m),c.push(()=>a.removeEventListener("input",m))}}),()=>{c.forEach(a=>a())}};if(!s&&document.readyState==="loading"){let i=null;const c=()=>{i=r()};return document.addEventListener("DOMContentLoaded",c,{once:!0}),()=>{i?i():document.removeEventListener("DOMContentLoaded",c)}}return r()}function ae(e,t){e.tagName==="INPUT"?e.type==="checkbox"?e.checked=!!t:e.type==="radio"?e.checked=e.value===String(t):e.value=t??"":e.tagName==="TEXTAREA"||e.tagName==="SELECT"?e.value=t??"":e.textContent=t??""}function ie(e){return e.type==="checkbox"?e.checked:e.type==="number"||e.type==="range"?e.valueAsNumber:e.value}function le(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V=Symbol("Comlink.proxy"),ce=Symbol("Comlink.endpoint"),ue=Symbol("Comlink.releaseProxy"),A=Symbol("Comlink.finalizer"),L=Symbol("Comlink.thrown"),B=e=>typeof e=="object"&&e!==null||typeof e=="function",fe={canHandle:e=>B(e)&&e[V],serialize(e){const{port1:t,port2:n}=new MessageChannel;return U(e,t),[n,[n]]},deserialize(e){return e.start(),q(e)}},de={canHandle:e=>B(e)&&L in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},F=new Map([["proxy",fe],["throw",de]]);function ge(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function U(e,t=globalThis,n=["*"]){t.addEventListener("message",function s(r){if(!r||!r.data)return;if(!ge(n,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:i,type:c,path:a}=Object.assign({path:[]},r.data),o=(r.data.argumentList||[]).map(E);let l;try{const f=a.slice(0,-1).reduce((g,m)=>g[m],e),d=a.reduce((g,m)=>g[m],e);switch(c){case"GET":l=d;break;case"SET":f[a.slice(-1)[0]]=E(r.data.value),l=!0;break;case"APPLY":l=d.apply(f,o);break;case"CONSTRUCT":{const g=new d(...o);l=be(g)}break;case"ENDPOINT":{const{port1:g,port2:m}=new MessageChannel;U(e,m),l=Ee(g,[g])}break;case"RELEASE":l=void 0;break;default:return}}catch(f){l={value:f,[L]:0}}Promise.resolve(l).catch(f=>({value:f,[L]:0})).then(f=>{const[d,g]=C(f);t.postMessage(Object.assign(Object.assign({},d),{id:i}),g),c==="RELEASE"&&(t.removeEventListener("message",s),j(t),A in e&&typeof e[A]=="function"&&e[A]())}).catch(f=>{const[d,g]=C({value:new TypeError("Unserializable return value"),[L]:0});t.postMessage(Object.assign(Object.assign({},d),{id:i}),g)})}),t.start&&t.start()}function me(e){return e.constructor.name==="MessagePort"}function j(e){me(e)&&e.close()}function q(e,t){const n=new Map;return e.addEventListener("message",function(r){const{data:i}=r;if(!i||!i.id)return;const c=n.get(i.id);if(c)try{c(i)}finally{n.delete(i.id)}}),R(e,n,[],t)}function x(e){if(e)throw new Error("Proxy has been released and is not useable")}function W(e){return w(e,new Map,{type:"RELEASE"}).then(()=>{j(e)})}const v=new WeakMap,N="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(v.get(e)||0)-1;v.set(e,t),t===0&&W(e)});function he(e,t){const n=(v.get(t)||0)+1;v.set(t,n),N&&N.register(e,t,e)}function pe(e){N&&N.unregister(e)}function R(e,t,n=[],s=function(){}){let r=!1;const i=new Proxy(s,{get(c,a){if(x(r),a===ue)return()=>{pe(i),W(e),t.clear(),r=!0};if(a==="then"){if(n.length===0)return{then:()=>i};const o=w(e,t,{type:"GET",path:n.map(l=>l.toString())}).then(E);return o.then.bind(o)}return R(e,t,[...n,a])},set(c,a,o){x(r);const[l,f]=C(o);return w(e,t,{type:"SET",path:[...n,a].map(d=>d.toString()),value:l},f).then(E)},apply(c,a,o){x(r);const l=n[n.length-1];if(l===ce)return w(e,t,{type:"ENDPOINT"}).then(E);if(l==="bind")return R(e,t,n.slice(0,-1));const[f,d]=$(o);return w(e,t,{type:"APPLY",path:n.map(g=>g.toString()),argumentList:f},d).then(E)},construct(c,a){x(r);const[o,l]=$(a);return w(e,t,{type:"CONSTRUCT",path:n.map(f=>f.toString()),argumentList:o},l).then(E)}});return he(i,e),i}function ye(e){return Array.prototype.concat.apply([],e)}function $(e){const t=e.map(C);return[t.map(n=>n[0]),ye(t.map(n=>n[1]))]}const H=new WeakMap;function Ee(e,t){return H.set(e,t),e}function be(e){return Object.assign(e,{[V]:!0})}function C(e){for(const[t,n]of F)if(n.canHandle(e)){const[s,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:s},r]}return[{type:"RAW",value:e},H.get(e)||[]]}function E(e){switch(e.type){case"HANDLER":return F.get(e.name).deserialize(e.value);case"RAW":return e.value}}function w(e,t,n,s){return new Promise(r=>{const i=we();t.set(i,r),e.start&&e.start(),e.postMessage(Object.assign({id:i},n),s)})}function we(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ze(e){return new Worker("/linkedin-zip-puzzle/assets/worker-DsMmfO3A.js",{name:e==null?void 0:e.name})}const p=6;function Q(e,t){const n=Math.floor(e/p),s=e%p,r=Math.floor(t/p),i=t%p,c=Math.abs(n-r),a=Math.abs(s-i);return c===1&&a===0||c===0&&a===1}const Se=new ze,G=q(Se);console.log("âœ… Worker initialized with Comlink");const z=[],xe=2;let k=!1;async function K(){if(!k){k=!0;try{for(;z.length<xe;){console.log("[Queue] Generating background puzzle...");const e=await G.generatePuzzle();if(e){z.push(e),console.log(`[Queue] Puzzle added. Size: ${z.length}`);const t=document.getElementById("loading");t&&t.style.display==="block"&&z.length}else break}}catch(e){console.error("[Queue] Background generation failed:",e)}finally{k=!1}}}K();const y=document.getElementById("grid"),u=[],b=re({cellsVisited:0,formattedTime:"00:00"});se(document.body,b);let T=null,O=0,I=!1;function Le(e){const t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return`${t}:${n}`}function X(){b.formattedTime=Le(O)}function Te(){I||(I=!0,T=setInterval(()=>{O++,X()},1e3))}function Y(){T&&(clearInterval(T),T=null),I=!1}function Z(){Y(),O=0,X()}for(let e=0;e<p*p;e++){const t=document.createElement("div");t.className="cell",t.dataset.index=e;const n=document.createElement("span");n.className="cell-index",n.textContent=e,t.appendChild(n),y.appendChild(t)}let P=[],Pe=null,h=1;function M(e){const t=P.find(n=>n.index===e);return t?t.value:null}function J(e){const t=M(e);return t!==null?t===h:!0}let S=!1;function ve(){if(u.length===p*p){console.log("ðŸŽ‰ You won!"),Y();const e=document.getElementById("win-overlay");return e.classList.remove("hidden"),e.classList.add("flex"),!0}return!1}function _(e,t){u.push(e),b.cellsVisited=u.length,t.style.background="#4CAF50",M(e)===h&&h++,console.log("Path:",u,"Next number:",h),ve()}function ee(e){const t=u.indexOf(e);if(t===-1)return;const n=u.slice(t+1);u.length=t+1,b.cellsVisited=u.length;const s=y.querySelectorAll(".cell");n.forEach(r=>{s[r].style.background=""}),h=1,u.forEach(r=>{M(r)===h&&h++}),console.log("Backtracked to:",e,"Path:",u,"Next:",h)}y.addEventListener("mousedown",e=>{if(e.target.classList.contains("cell")){const t=parseInt(e.target.dataset.index);if(u.length>0&&t===u[u.length-1]){S=!0;return}if(u.includes(t)){ee(t),S=!0;return}if(u.length>0){const s=u[u.length-1];if(Q(s,t)&&J(t)){S=!0,_(t,e.target);return}}if(M(t)===1){u.length=0,b.cellsVisited=0,h=1,I||Te(),y.querySelectorAll(".cell").forEach(r=>r.style.background=""),S=!0,_(t,e.target);return}}});y.addEventListener("mousemove",e=>{if(S&&e.target.classList.contains("cell")){const t=parseInt(e.target.dataset.index);if(u.length>1&&t===u[u.length-2]){ee(t);return}if(!u.includes(t)){const n=u[u.length-1];Q(n,t)&&J(t)&&_(t,e.target)}}});y.addEventListener("mouseup",()=>{S=!1});async function D(){u.length=0,h=1,b.cellsVisited=0,Z();const e=y.querySelectorAll(".cell");e.forEach(s=>{s.style.background="";const r=s.querySelector(".cell-index");s.dataset.index,s.textContent="",r&&s.appendChild(r)});const t=document.getElementById("loading"),n=document.getElementById("new-puzzle");t.style.display="block",n.disabled=!0;try{let s;if(z.length>0?(console.log("[Queue] Using pre-generated puzzle"),s=z.shift()):(console.log("[Queue] Queue empty, generating immediately..."),s=await G.generatePuzzle()),K(),!s){console.error("Worker failed to generate puzzle"),alert("Failed to generate puzzle. Please try again.");return}console.log(`âœ… Loaded puzzle with ${s.clueCount} clues`),P=s.numbers,Pe=[s.solution],P.forEach(({index:i,value:c})=>{const a=e[i],o=document.createElement("span");o.textContent=c,o.style.pointerEvents="none",a.appendChild(o)});const r=document.getElementById("solution-display");r.innerHTML=`
            <strong>Puzzle:</strong> ${JSON.stringify(P)}<br><br>
            <strong>âœ… Unique Solution (${s.solution.length} cells):</strong><br>
            ${s.solution.join(" â†’ ")}
        `}catch(s){console.error("Error generating puzzle:",s),alert("Error generating puzzle. Check console for details.")}finally{t.style.display="none",n.disabled=!1}console.log("New puzzle loaded")}D();document.getElementById("new-puzzle").addEventListener("click",D);document.getElementById("overlay-new-puzzle").addEventListener("click",()=>{const e=document.getElementById("win-overlay");e.classList.add("hidden"),e.classList.remove("flex"),D()});document.getElementById("overlay-exit").addEventListener("click",()=>{const e=document.getElementById("win-overlay");e.classList.add("hidden"),e.classList.remove("flex")});document.getElementById("reset").addEventListener("click",()=>{u.length=0,h=1,b.cellsVisited=0,Z(),y.querySelectorAll(".cell").forEach(t=>{t.style.background=""}),console.log("Reset complete")});
